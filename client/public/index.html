<!DOCTYPE html>
<html>
  <head>
    <title>
      simple collab
    </title>
  </head>
  <body ng-app="simpleCollab" ng-controller="collab_ctrl">
    <button>Click</button>
    <textarea ng-change="bloop()" id="foo" ng-model="db"></textarea>

    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>


    <script>
      var socket = io('http://localhost:3002');
      var app = angular.module("simpleCollab", []);
      app.controller("collab_ctrl", function($scope) {
        $scope.db="";
        $scope.pv="";

        $scope.bloop = function(){
          socket.emit('hi',{data:$scope.db});
          console.log($scope.db);
        }

        // setInterval(function(){
        //   if($scope.db!=$scope.pv){
        //     socket.emit('hi',{data:$scope.db});
        //     $scope.pv = $scope.db;
        //   }
        // },10000);
      });




        socket.on('connect', function(){
          // console.log(data);
        });
        socket.on('event', function(data){
          console.log(data);
        });
        socket.on('disconnect', function(){});

        // function bloop(){
        //   console.log();
        //
        //
        //   socket.emit('hi',{data:"boob"});
        // }


        // socket.emit('connection',{data:true});
    </script>
  </body>
</html>
